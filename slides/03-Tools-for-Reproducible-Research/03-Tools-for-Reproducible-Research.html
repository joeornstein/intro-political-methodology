<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Tools for Reproducible Research</title>
    <meta charset="utf-8" />
    <meta name="author" content="Joseph T. Ornstein" />
    <meta name="date" content="2020-09-09" />
    <link href="03-Tools-for-Reproducible-Research_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="03-Tools-for-Reproducible-Research_files/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Tools for Reproducible Research
## POLS 7012: Introduction to Political Methodology
### Joseph T. Ornstein
### University of Georgia
### September 9, 2020

---




---

class: center, middle

## **Reproducible Research**

Provides a complete set of instructions on how to replicate a study's results.


---

## Why make your research reproducible? 

--

*(From most high-minded to least high-minded...)*

--

1. Science is **defined** by reproducibility.

--

2. Makes it easier for others to replicate and build on your results.

--

3. Makes it easier for your *future self* to replicate and build on your results.

--

4. Increasingly, journals require it.

???

1. 

2. 

3. 

4. In order to publish at journals like *APSR* and *Political Analysis*, you need to submit code and data such that a third-party can independently reproduce all of your tables and charts. 

---

## This Week's Objectives

By the end of this week, you will be able to...

--

1. Write **dynamic manuscripts** (`R Markdown`)

--

2. Use version control software (`git`)

--

3. Collaborate with others and share your work online (`GitHub`)

--

4. Manage your citations without transcription errors (Zotero)


--

&lt;br&gt;

Each tool requires an initial investment, but they're WORTH IT.

???

My hope is that by forcing you to make that initial investment in class, you'll be more likely to adopt good habits in your work.

---

class: center, middle

# `R Markdown`

---

# A Tale of Two Workflows

--

.pull-left[
&lt;img src="img/office.png" width="40%" style="display: block; margin: auto;" /&gt;

1. Edit data in Excel

2. Statistical analysis in Excel, or maybe `R`

3. Write a paper in Word.

4. Copy-paste results from analysis.

5. Email to coauthors for edits

6. Copy-paste results into Powerpoint.

]

???

Where might errors leak into Workflow 1?


---

# The Office Workflow is Error-Prone

&lt;br&gt;

[![](img/reinhart-rogoff-excel-banner.png)](https://www.businessinsider.com/reinhart-and-rogoff-admit-excel-blunder-2013-4)

--

&lt;img src="img/grim-test.png" width="100%" style="display: block; margin: auto;" /&gt;


---

# A Tale of Two Workflows

.pull-left[
&lt;img src="img/office.png" width="40%" style="display: block; margin: auto;" /&gt;

1. Edit data in Excel

2. Statistical analysis in Excel, or maybe `R`

3. Write a paper in Word.

4. Copy-paste results from analysis.

5. Email to coauthors for edits

6. Copy-paste results into Powerpoint.

]

--

.pull-right[

&lt;img src="img/rmarkdown_flow.png" width="45%" style="display: block; margin: auto;" /&gt;

1. Write paper in `R Markdown`

2. Embed analysis directly into the source

3. Track revisions with `git`

4. Share `GitHub` repository with coauthors

]

???

No copy-and-paste. Whenever you change something in the code, it changes in the paper too!

---


## Step 1: Create an R Markdown Document

&lt;img src="img/new_rmd.png" width="600" style="display: block; margin: auto;" /&gt;

---

## Step 2: Write Text Using `Markdown`

- Plain text "markup language"

- Very different ethos than WYSIWYG editors

--

&lt;img src="img/quicktourexample.png" width="600" style="display: block; margin: auto;" /&gt;

---

## Step 3: Add Code Chunks


&lt;img src="img/rmd_code_chunk.png" width="60%" style="display: block; margin: auto;" /&gt;

- Each code chunk should serve a single purpose.

- Can also include inline code, like '`r` `mean(data$ftbiden)`'

  - (Just replace those parentheses with back ticks.)



---

## Step 4: Knit to a Document

![](img/knit-logo.png)

![](img/rmdint-dropdown.png)


---

### `rticles` package for academic papers


```r
install.packages('rticles')
```

&lt;img src="img/new_rticles.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## Try It!

Take your `R` code from Problem Set 2 and create an `R Markdown` document.

### Further Reading

**Links:**

[RMarkdown Tutorial](https://rmarkdown.rstudio.com/lesson-1.html)

[RMarkdown Cheat Sheet](https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf)

[Common Symbols in `\(\LaTeX\)`](https://artofproblemsolving.com/wiki/index.php/LaTeX:Symbols) 

---

class: center, middle

## Version Control (`git` and `GitHub`)

---

## The Typical Academic's Version Control System

&lt;img src="img/final-phd-comics.gif" width="50%" style="display: block; margin: auto;" /&gt;

---

## The Typical Academic's Version Control System

**Problems:**

- It's a psychic nightmare.

- Which is the most recent copy of the paper? `paper_VERSION2_RAH_EDITS` or `paper_VERSION2_JTO_EDITS`?

- All those copies waste memory.

---

## Actual Version Control System (VCS)

![](img/RStudio-commit.png)

---

## Step 1: Install and setup `git`

[![](img/git.png)](https://git-scm.com/downloads)

### Introduce Yourself

Type this into the Terminal (Tools &gt; Shell)

```
git config --global user.name 'yourGitHubUsername'
git config --global user.email 'name@provider.com'
```

---

## Step 2: Create a new R project

&lt;img src="img/check-git-repo.png" width="85%" style="display: block; margin: auto;" /&gt;

---

## Step 3: Modify Your Code


```r
x &lt;- 5

print(x*2)

print(paste('The value of x is', x))
```

---

## Step 4: Stage Your Changes

- Go to the `Git` pane in the upper right.

- Check the box of all the files you want to track.

- They are now added to the "staging area".

![](img/git-stage.png)

---

## Step 5: Commit Your Changes

- When you've added all the files you want to track, click "Commit"

![](img/git-commit.png)
- Add a "commit message" that says what you did and why

- Click "Commit"

---

## Try It!

- Copy your `R Markdown` file (and all the data you need) into the new project.

- Do you see it in the `Git` pane? Stage and commit it (commit message: "initial commit")

- Now make some modifications to the text or code. Stage and commit.

  - Repeat
  
  - Repeat
  
- Click "History" (the clock button). You should see a log of all the revisions you made.

### Further Reading

[Reproducible Research Workshop](https://www.geo.uzh.ch/microsite/reproducible_research/post/rr-rstudio-git/)



---

class: center, middle

## GitHub

---

## Step 1: Create a GitHub account

![](img/github-profile.png)

---

## Step 2: Create a new repository

![](img/GitHub-create-repo.png)

---

## Step 3: Copy the repository URL

![](img/GitHub-copy-repo-https.png)

---

## Step 4: Create a New R Project with Version Control

![](img/RStudio-clone-git-project.gif)

This "clones" the repository so you now have a local copy.

---

## Step 5: Modify, Stage, and Commit As Usual

![](img/git-commit.png)

---

## Step 6: Push and Pull

- After committing updates, click the green "Push" arrow to update the GitHub repository.

![](img/updated-repo.png)

- To get updates *from* GitHub, click the blue "Pull" arrow.

---

## The Basic Workflow

&lt;img src="img/git-flow.webp" width="70%" style="display: block; margin: auto;" /&gt;

---

## Warning: gitignore your big data files

- I had this problem this morning. 

- If you have a really big data file (&gt;100MB), GitHub will reject it, and it will be a **pain** to fix.

- Easy fix: tell `git` to ignore the folder where you put your data and have it focus on the code.

  - Just select your data folder in the `Git` pane in RStudio and click "Ignore".


---

## Try It!

- Add an R script or `R Markdown` document to your GitHub-linked project. 

- Make modifications, track changes with the `Git` pane.

- Push to the remote GitHub repository. 

  - Refresh the web browser. You should see your files there!

---

class: center, middle

## Reference Management (Zotero)

---

## Reference Management (Zotero)

&lt;img src="img/zotero-screenshot.png" width="600" style="display: block; margin: auto;" /&gt;

- Keep all your citations in one place.

- Drag-and-drop or use browser extension; automatically collects metadata.

- Export to BibTeX to easily format citations &amp; bibliography.

---

## Download Better BibTeX

[![](img/better-bibtex.png)](https://retorque.re/zotero-better-bibtex/installation/)

- Allows you to easily look up your *cite keys*.

- Ensures that cite keys are unique.

---

## A Note on RStudio v1.4

The next version of RStudio will streamline so much of this!

&lt;img src="img/visual-editing-citations.png" width="600" style="display: block; margin: auto;" /&gt;

---

## Problem Set 3

Take all of your new skills and coauthor a (tiny) paper with one or two of your classmates. 

1. Write the paper in `R Markdown`.

2. Maintain all materials on a private `GitHub` repository.

3. Embed figures and analyses in the text.

4. Include in-line citations and a bibliography.

5. I should be able to:

  - Delete your paper.
  
  - Click `Knit` on my computer and the paper will reproduce itself.

6. After you submit, I'll play reviewer and ask you to revise a few things.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
